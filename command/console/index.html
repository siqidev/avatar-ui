<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob: https:; media-src 'self' data: blob: https:; connect-src 'self' http://localhost:* http://127.0.0.1:* https: ws: wss:;"
    />
    <title>SPECTRA Command</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./node_modules/xterm/css/xterm.css" />
  </head>
  <body>
    <!-- 画面全体をまとめるコンテナ -->
    <main class="app split">
      <!-- 左側ペイン群の表示領域 -->
      <section data-slot="output" id="pane-output">
        <div class="surface-host" id="surface-host">
          <!-- ミッションペイン -->
          <div class="surface surface--mission" id="mission-surface">
            <div class="mission-header">
              <span class="mission-header-line"></span>
              <span class="mission-title">MISSION</span>
              <span class="mission-header-line"></span>
            </div>
            <div class="mission-content" id="mission-content">
              <div class="mission-section mission-purpose" id="mission-purpose">Purpose: (none)</div>
              <div class="mission-section mission-summary" id="mission-summary">
                <span class="mission-summary-toggle">▼</span>
                <span class="mission-summary-icon">≡</span>
                <span class="mission-summary-label">Goals:</span>
                <span class="mission-summary-bar"><span class="mission-summary-bar-fill" id="mission-bar-fill"></span></span>
                <span class="mission-summary-rate" id="mission-summary-rate">[0/0, 0%]</span>
              </div>
              <div class="mission-goals" id="mission-goals"></div>
            </div>
          </div>
          <!-- ミッション/ダイアログ間のスプリッター -->
          <div class="splitter splitter--vertical" data-target="mission-surface"></div>
          <!-- ダイアログペイン -->
          <div class="surface surface--dialogue">
            <div class="pane-header">
              <span class="pane-header-line"></span>
              <span class="pane-title">DIALOGUE</span>
              <span class="pane-header-line"></span>
            </div>
            <div class="text-scroll" id="output"></div>
          </div>
          <!-- ダイアログ/ターミナル間のスプリッター -->
          <div class="splitter splitter--vertical" data-target="dialogue"></div>
          <!-- ターミナルペイン -->
          <div class="surface surface--terminal" id="terminal-surface">
            <div class="pane-header">
              <span class="pane-header-line"></span>
              <span class="pane-title">TERMINAL</span>
              <span class="pane-header-line"></span>
            </div>
            <div class="terminal-host" id="terminal-host"></div>
          </div>
        </div>
      </section>

      <!-- 左右パネル間のスプリッター -->
      <div class="splitter splitter--horizontal" id="splitter-main"></div>

      <!-- 入力欄 -->
      <footer data-slot="input" id="pane-input">
        <span class="prompt">&gt;</span>
        <input type="text" id="input" autofocus />
        <div class="command-palette is-hidden" id="command-palette"></div>
      </footer>

      <!-- 右側パネル（アバター＋インスペクター） -->
      <aside data-slot="avatar" id="pane-right">
        <div id="pane-avatar">
        <div id="avatar-wrap">
          <img
            id="avatar-img"
            src="./assets/idle.png"
            data-idle="./assets/idle.png"
            data-talk="./assets/talk.png"
            alt="avatar"
          />
        </div>
        <div id="avatar-label" class="avatar-label">SPECTRA</div>
        </div>
        <!-- インスペクターペイン（タイムライン形式） -->
        <div class="surface surface--inspector" id="inspector-surface">
          <div class="inspector-header">
            <span class="inspector-header-line"></span>
            <span class="inspector-title">INSPECTOR</span>
            <span class="inspector-header-line"></span>
          </div>
          <div class="inspector-timeline" id="inspector-timeline">
            <!-- タイムラインエントリはJSで動的に追加 -->
          </div>
        </div>
        <!-- バイタルペイン -->
        <div class="surface surface--vitals" id="vitals-surface">
          <div class="vitals-header">
            <span class="vitals-header-line"></span>
            <span class="vitals-title">VITALS</span>
            <span class="vitals-header-line"></span>
          </div>
          <div class="vitals-content" id="vitals-content">
            <div class="vitals-item">
              <div class="vitals-row">
                <span class="vitals-label">CPU</span>
                <span class="vitals-value" id="vitals-cpu">--%</span>
              </div>
              <div class="vitals-bar"><span class="vitals-bar-fill" id="vitals-cpu-bar"></span></div>
            </div>
            <div class="vitals-item">
              <div class="vitals-row">
                <span class="vitals-label">Memory</span>
                <span class="vitals-value" id="vitals-memory">--GB</span>
              </div>
              <div class="vitals-bar"><span class="vitals-bar-fill" id="vitals-memory-bar"></span></div>
            </div>
            <div class="vitals-item">
              <div class="vitals-row">
                <span class="vitals-label">Network</span>
                <span class="vitals-value" id="vitals-network">--Mbps</span>
              </div>
              <div class="vitals-bar"><span class="vitals-bar-fill" id="vitals-network-bar"></span></div>
            </div>
            <div class="vitals-item">
              <div class="vitals-row">
                <span class="vitals-label">API Usage</span>
                <span class="vitals-value" id="vitals-api">--%</span>
              </div>
              <div class="vitals-bar"><span class="vitals-bar-fill" id="vitals-api-bar"></span></div>
            </div>
          </div>
        </div>
      </aside>

      <!-- 状態/モードの表示 -->
      <div class="meta-bar" id="meta"></div>
    </main>

    <script src="./node_modules/xterm/lib/xterm.js"></script>
    <script src="./node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
    <script src="./main.js"></script>
  </body>
</html>
