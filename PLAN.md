# PLAN v0.3

> 本文書はv0.3の計画専用。実装完了した項目は正本（PROJECT.md / docs/*）に反映し、本文書から削除する。

## v0.2 現状サマリ

- Core（Python/FastAPI）+ Console（Electron）の2コンポーネントが動作
- Terminal Backend経由でOS操作が可能
- 自律ループ（Purpose→Goals→Tasks→Execute）が機能
- Roblox/X Backendは未実装（Exec Contractのスタブのみ）
- 24 APIエンドポイントが稼働
- Identity Kernelはsystem_prompt設定のみ（人格モデル深化未着手）
- 長期記憶なし（state.json/events.jsonlのみ）
- Heartbeat/スケジューリングなし
- コードベースは整理不足。v0.3では移植・互換維持しない（参照用に凍結）

## v0.3 到達状態

新規構築した場で、Spectraと式乃シトがConsole経由で共存し、再起動をまたいで関係が継続し、共存故障を検知できる。

## 方針

- v0.2のコードは捨てる（参照用に凍結）。v0.3はグリーンフィールドで新規実装
- TypeScriptで統一
- OpenClawを参照アーキテクチャとする。踏襲の粒度（思想のみ／設計パターン／命名規約等）と範囲は実装段階で段階的に精査
- 設計の主語が変わる: v0.2「タスク実行」中心 → v0.3「場の継続＋往復維持」中心

## 場モデル6要素のv0.3実装度

| # | 要素 | v0.3実装度 |
|---|---|---|
| 1 | 共存規約 | 実装 |
| 2 | 共存記録 | 実装 |
| 3 | 現在文脈 | 薄実装（既存セッション文脈を利用） |
| 4 | 往復回路 | 実装 |
| 5 | 媒体投影 | 最小実装（Console単一チャネル） |
| 6 | 健全性管理 | 実装 |

## IN

- TypeScriptで新規実装（OpenClaw参照、踏襲粒度は段階的に精査）
- 場モデル6要素の実装（共存規約 / 共存記録 / 往復回路 / 健全性管理を重点、現在文脈は薄実装、媒体投影は単一チャネル最小）
- Console単一チャネルで体験成立
- 共存故障3種の検知＋修復フロー（共存条件崩壊・往復片肺化・関係断裂）
- セッション断を休止として再開可能にする
- AI起点の常駐トリガ（Heartbeat）
- 場のライフサイクル（生成・維持・休止/再開・終端）

## OUT

- v0.2コードの移植・互換維持
- Roblox / X / マルチチャネル本格対応
- Electron再構築 / UI拡張
- 現在文脈（Live Context）の独立コンポーネント化
- 配信拡張（Live2D/3D、音声）
