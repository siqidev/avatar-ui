# PLAN v0.3

> 本文書はv0.3の計画専用。実装完了した項目は正本（PROJECT.md / docs/*）に反映し、本文書から削除する。

## v0.2 現状サマリ

- Core + Console の2コンポーネントが動作
- Terminal Backend経由でOS操作が可能
- 自律ループ（Purpose→Goals→Tasks→Execute）が機能
- Roblox/X Backendは未実装（Exec Contractのスタブのみ）
- 24 APIエンドポイントが稼働
- Identity Kernelはsystem_prompt設定のみ（人格モデル深化未着手）
- 長期記憶なし（state.json/events.jsonlのみ）
- Heartbeat/スケジューリングなし

## v0.3 到達目標

Console上で、同一アバターが記憶を引き継ぎつつ自発行動し、人間との往復干渉によって次の行動を変化させ続けられる。

## スコープ項目

| 項目 | 内容 |
|------|------|
| Identity Kernel最小実装 | 同一Avatar ID・中核方針のセッション跨ぎ保持 |
| Heartbeat | 定期的な自発行動（提案・確認・実行待機） |
| 長期記憶最小実装 | 過去イベントの再参照・判断根拠への利用 |
| フィードバック反映 | 承認/却下/修正が次の行動計画を変化させる |
| 行動サイクル確認 | 探索→代謝→生成→適応の4相がログ上で確認可能 |

## 非対象（v0.3では扱わない）

- Roblox/3D空間での実行・表示
- 音声対話・マルチモーダル入出力
- マルチエージェント/マルチチャネル常駐
- クラウド隔離実行、決済、マルチサーバー安全性
- 大規模メモリ基盤

## 検証条件

- セッションを跨いでも同一Avatar IDと中核方針を保持して起動できる
- Heartbeatで一定間隔の自発行動が発火する
- 過去イベントを長期記憶から再参照し、次タスクの判断理由に使える
- 人間のフィードバック（承認/却下/修正）を受けて、次回の行動計画が変化する
- 1日の運用で探索→代謝→生成→適応の4相が最低1回はログ上で確認できる

## 反響循環への移行条件

式乃シト自身が7日間連続運用し、「Spectraが昨日の文脈を踏まえて今日の提案をしている」と体感できる。

## 検討事項: Grok記憶との役割分担

| Grok記憶 | 仕組み | 役割 |
|---------|--------|------|
| 短期 | conversationオブジェクト | LLMコンテキスト（思考時に参照） |
| 中期 | response ID | セッション継続（補助） |
| 長期 | xAI Collections | 不変事実の保管（必要時のみ） |

原則: Grok記憶は補助、正本はファイル（state.json / events.jsonl）に統一。

## リスク・未確定事項

| ID | 内容 | 状態 |
|----|------|------|
| R-001 | OpenClawからの設計吸収の具体化（どのパターンをどう取り込むか） | 設計フェーズで議論 |
| R-002 | Heartbeatの間隔・トリガー設計 | 設計フェーズで決定 |
| R-003 | 長期記憶の実装方式（ベクトル検索 vs ファイルベース vs ハイブリッド） | 設計フェーズで決定 |

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-02-12 | PLAN.md作成、TBDプレースホルダーで初期化 |
| 2026-02-17 | v0.3スコープ確定。最小共生ループの成立を目標に5項目を定義 |
